{
  "seed_task": "Write a short story showing cooperation among forest animals during a storm in a gentle, natural tone and ending with a reflective message.",
  "global_constraints": [
    {
      "cid": "G1",
      "desc": "The answer must be at least 184 words long (approximately comparable length to the provided reference).",
      "scope": "global",
      "verifier_spec": {
        "check": "min_word_count",
        "args": {
          "min_words": 184
        }
      },
      "trace_to": null,
      "derived_from": "step3"
    },
    {
      "cid": "G2",
      "desc": "The answer must be written primarily in English.",
      "scope": "global",
      "verifier_spec": {
        "check": "require_language",
        "args": {
          "lang": "en"
        }
      },
      "trace_to": null,
      "derived_from": "step3"
    },
    {
      "cid": "G3",
      "desc": "The answer must include an Opening/Intro section, a Main Analysis/Body section, and a Conclusion/Outlook section in logical progression.",
      "scope": "global",
      "verifier_spec": {
        "check": "has_sections",
        "args": {
          "sections": [
            "Opening",
            "Body",
            "Conclusion"
          ]
        }
      },
      "trace_to": null,
      "derived_from": "step3"
    },
    {
      "cid": "G4",
      "desc": "The answer should maintain an objective, third-person analytic voice without using first-person pronouns.",
      "scope": "global",
      "verifier_spec": {
        "check": "forbid_first_person",
        "args": {}
      },
      "trace_to": null,
      "derived_from": "step3"
    }
  ],
  "block_specs": [
    {
      "block_id": "B1",
      "intent": "Opening",
      "text_span": "One morning, the forest woke to a sky heavy with gray. The wind whispered through the leaves, warning of a coming storm. Squirrel dashed about, trying to gather the last acorns, while Rabbit helped pull branches to reinforce the hollow where they all sometimes rested. Above them, Finch called out, “Tie the leaves together! The rain will be fierce!” Even the slow Tortoise dragged fallen bark toward the roots of an old oak, making a sturdy shelter.",
      "order_index": 0
    },
    {
      "block_id": "B2",
      "intent": "Main Analysis",
      "text_span": "By afternoon, the storm came roaring. Rain thudded on the canopy, and lightning flashed beyond the hills. The animals huddled together inside their shared shelter—fur, feathers, and shells pressed close. Squirrel trembled, but Bear’s deep voice rumbled softly, calming them. Finch fluttered near the entrance, watching until the thunder passed. When the wind finally eased, they all stepped out to see broken branches and soaked nests scattered around.",
      "order_index": 1
    },
    {
      "block_id": "B3",
      "intent": "Recommendation",
      "text_span": "They worked together through the following day. Beaver repaired the stream dam, Fox carried twigs for the smaller nests, and the deer cleared the paths again. Soon, the forest seemed alive with quiet gratitude.",
      "order_index": 2
    },
    {
      "block_id": "B4",
      "intent": "Conclusion",
      "text_span": "When the sun returned, its light shone on every creature, large and small, each one helping another in some gentle way. From that day on, they remembered: a forest stands strong not because its trees are tall, but because its hearts grow together.",
      "order_index": 3
    }
  ],
  "block_constraint_sets": [
    {
      "block_id": "B1",
      "logic_type": "AND",
      "constraints": [
        {
          "cid": "B1_C1",
          "desc": "Establish a forest setting with a coming storm",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "forest",
                "storm"
              ]
            }
          },
          "trace_to": "B1",
          "derived_from": "step4"
        },
        {
          "cid": "B1_C2",
          "desc": "Introduce multiple animal characters by name",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "Squirrel",
                "Rabbit",
                "Finch",
                "Tortoise"
              ]
            }
          },
          "trace_to": "B1",
          "derived_from": "step4"
        },
        {
          "cid": "B1_C3",
          "desc": "Show animals performing cooperative actions",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "helped",
                "together",
                "shelter"
              ]
            }
          },
          "trace_to": "B1",
          "derived_from": "step4"
        },
        {
          "cid": "B1_C4",
          "desc": "Use gentle, natural tone with descriptive nature imagery",
          "scope": "local",
          "verifier_spec": {
            "check": "tone_neutral_llm_judge",
            "args": {}
          },
          "trace_to": "B1",
          "derived_from": "step4"
        },
        {
          "cid": "B1_C5",
          "desc": "Use urgent, tense language describing the storm as threatening",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "urgent",
                "danger",
                "threatening",
                "fierce"
              ]
            }
          },
          "trace_to": "B1",
          "derived_from": "step5"
        },
        {
          "cid": "B1_C6",
          "desc": "Describe animals acting with haste and alarm",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "frantic",
                "hurried",
                "scrambled",
                "rushed"
              ]
            }
          },
          "trace_to": "B1",
          "derived_from": "step5"
        },
        {
          "cid": "B1_C7",
          "desc": "Maintain tense, urgent tone throughout the opening",
          "scope": "local",
          "verifier_spec": {
            "check": "tone_negative_llm_judge",
            "args": {}
          },
          "trace_to": "B1",
          "derived_from": "step5"
        },
        {
          "cid": "B1_C8",
          "desc": "Include at least three different urgent animal actions",
          "scope": "local",
          "verifier_spec": {
            "check": "min_numbered_items",
            "args": {
              "min_items": 3
            }
          },
          "trace_to": "B1",
          "derived_from": "step5"
        }
      ]
    },
    {
      "block_id": "B2",
      "logic_type": "sub-chain",
      "constraints": [
        {
          "cid": "B2_C1",
          "desc": "Describe the storm's arrival and immediate effects",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "storm",
                "rain",
                "lightning"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step4"
        },
        {
          "cid": "B2_C2",
          "desc": "Show animals huddling together in shared shelter",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "huddled",
                "shelter",
                "together"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step4"
        },
        {
          "cid": "B2_C3",
          "desc": "Include specific animal interactions during the storm",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "Squirrel",
                "Bear",
                "Finch"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step4"
        },
        {
          "cid": "B2_C4",
          "desc": "Show the storm's progression from intensity to easing",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "thunder",
                "wind",
                "eased"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step4"
        },
        {
          "cid": "B2_C5",
          "desc": "Describe the aftermath visible when animals emerge",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "broken branches",
                "soaked nests"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step4"
        },
        {
          "cid": "B2_C6",
          "desc": "Include at least three distinct emotional states experienced by different animals during the storm",
          "scope": "local",
          "verifier_spec": {
            "check": "must_list_n_subpoints",
            "args": {
              "n": 3
            }
          },
          "trace_to": "B2",
          "derived_from": "step5"
        },
        {
          "cid": "B2_C7",
          "desc": "Describe specific comforting actions taken by animals to support each other",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "comfort",
                "reassure",
                "support"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step5"
        },
        {
          "cid": "B2_C8",
          "desc": "Show animals actively working together to improve their shelter during the storm",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "worked",
                "improved",
                "strengthened"
              ]
            }
          },
          "trace_to": "B2",
          "derived_from": "step5"
        },
        {
          "cid": "B2_C9",
          "desc": "Maintain a tone focused on resilience and mutual care rather than just survival",
          "scope": "local",
          "verifier_spec": {
            "check": "tone_neutral_llm_judge",
            "args": {}
          },
          "trace_to": "B2",
          "derived_from": "step5"
        }
      ]
    },
    {
      "block_id": "B3",
      "logic_type": "AND",
      "constraints": [
        {
          "cid": "B3_C1",
          "desc": "Include at least three distinct animal actions",
          "scope": "local",
          "verifier_spec": {
            "check": "min_numbered_items",
            "args": {
              "min_items": 3
            }
          },
          "trace_to": "B3",
          "derived_from": "step4"
        },
        {
          "cid": "B3_C2",
          "desc": "Maintain gentle natural tone throughout",
          "scope": "local",
          "verifier_spec": {
            "check": "tone_neutral_llm_judge",
            "args": {}
          },
          "trace_to": "B3",
          "derived_from": "step4"
        },
        {
          "cid": "B3_C3",
          "desc": "Convey a sense of restoration and gratitude",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "repaired",
                "cleared",
                "gratitude"
              ]
            }
          },
          "trace_to": "B3",
          "derived_from": "step4"
        }
      ]
    },
    {
      "block_id": "B4",
      "logic_type": "sub-chain",
      "constraints": [
        {
          "cid": "B4_C1",
          "desc": "Describe the scene after the storm with the sun returning",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "sun",
                "returned",
                "light"
              ]
            }
          },
          "trace_to": "B4",
          "derived_from": "step4"
        },
        {
          "cid": "B4_C2",
          "desc": "Show creatures helping each other in gentle ways",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "creature",
                "helping",
                "gentle"
              ]
            }
          },
          "trace_to": "B4",
          "derived_from": "step4"
        },
        {
          "cid": "B4_C3",
          "desc": "End with a reflective message about forest strength through unity",
          "scope": "local",
          "verifier_spec": {
            "check": "must_include_keywords",
            "args": {
              "keywords": [
                "forest",
                "strong",
                "hearts",
                "together"
              ]
            }
          },
          "trace_to": "B4",
          "derived_from": "step4"
        }
      ]
    }
  ],
  "selections": [
    {
      "sid": "SEL_B1",
      "condition": "If the story needs to emphasize immediate danger and urgency rather than gentle cooperation",
      "trace_to": "B1",
      "branch_real": {
        "constraints": [
          "B1_C1",
          "B1_C2",
          "B1_C3",
          "B1_C4"
        ]
      },
      "branch_alt": {
        "constraints": [
          "B1_C5",
          "B1_C6",
          "B1_C7",
          "B1_C8"
        ]
      },
      "derived_from": "step5"
    },
    {
      "sid": "SEL_B2",
      "condition": "If the story needs to emphasize the animals' emotional resilience and individual contributions to collective comfort during the storm",
      "trace_to": "B2",
      "branch_real": {
        "constraints": [
          "B2_C1",
          "B2_C2",
          "B2_C3",
          "B2_C4",
          "B2_C5"
        ]
      },
      "branch_alt": {
        "constraints": [
          "B2_C6",
          "B2_C7",
          "B2_C8",
          "B2_C9"
        ]
      },
      "derived_from": "step5"
    }
  ],
  "meta": {
    "assembled_from": {
      "step1": "seed_task",
      "step2": "segmentation",
      "step3": "global_constraints",
      "step4": "block_constraints + block_logic",
      "step5": "selections + augmented block_constraints"
    }
  }
}